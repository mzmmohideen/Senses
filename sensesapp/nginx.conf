#######################################################################

#

# This is the main Nginx configuration file.  

#

# More information about the configuration options is available on 

#   * the English wiki - http://wiki.nginx.org/Main

#

#######################################################################



#----------------------------------------------------------------------

# Main Module - directives that cover basic functionality

#

#   http://wiki.nginx.org/NginxHttpMainModule

#

#----------------------------------------------------------------------



#user              mohideen;

#worker_processes  4;



#error_log  /var/log/nginx/error.log;

#error_log  /var/log/nginx/error.log  notice;

#error_log  /var/log/nginx/error.log  info;



#pid        /var/run/nginx.pid;



#----------------------------------------------------------------------

# Events Module 

#

#   http://wiki.nginx.org/NginxHttpEventsModule

#

#----------------------------------------------------------------------







#----------------------------------------------------------------------

# HTTP Core Module

#

#   http://wiki.nginx.org/NginxHttpCoreModule 

#

#----------------------------------------------------------------------



http {

    include       /etc/nginx/mime.types;

    default_type  application/octet-stream;

    # needs to exist and be writable by nginx

    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '

                      '$status $body_bytes_sent "$http_referer" '

                      '"$http_user_agent" "$http_x_forwarded_for"';



    access_log  /var/log/nginx/access.log  main;



    sendfile        on;

    #tcp_nopush     on;



    #keepalive_timeout  0;

    keepalive_timeout  65;



    #gzip  on;



    upstream app_server {

        #server unix:/tmp/gunicorn.sock fail_timeout=0;

        # For a TCP configuration:

        server 127.0.0.1:8001 fail_timeout=60s;

    }





 #

    # The default server

    #

    server {

        listen       0.0.0.0:8001;

        client_max_body_size 4G;

        server_name  _;

#  Ensure requests for pagespeed optimized resources go to the pagespeed

#  handler and no extraneous headers get set.



        #access_log  logs/host.access.log  main;



        keepalive_timeout 5;



        location /static {

            alias   /home/mohideen/projects/Senses/sensesapp/static;

        }



        location / {

            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;

            proxy_set_header Host $http_host;

            proxy_redirect off;



        # Enable Gzip

         gzip  on;

         gzip_http_version 1.0;

         gzip_comp_level 5;

         gzip_min_length 512;

         gzip_buffers     4 8k;

         gzip_proxied any;

         gzip_types text/plain text/xml application/xml application/xml+rss text/css text/javascript application/javascript application/json;



         gzip_proxied        expired no-cache no-store private auth;

         gzip_disable        "MSIE [1-6]\.";

         gzip_vary           on;



            if (!-f $request_filename) {

                proxy_pass http://app_server;

                break;

            }

        }







    }

    # Load config files from the /etc/nginx/conf.d directory

    include /etc/nginx/conf.d/*.conf;



}
